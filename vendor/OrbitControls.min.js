THREE.OrbitControls=function(e,t){function O(){return 2*Math.PI/60/60*n.autoRotateSpeed}function M(){return Math.pow(.95,n.zoomSpeed)}function _(e){if(n.enabled===false)return;e.preventDefault();if(e.button===n.mouseButtons.ORBIT){if(n.noRotate===true)return;T=x.ROTATE;i.set(e.clientX,e.clientY)}else if(e.button===n.mouseButtons.ZOOM){if(n.noZoom===true)return;T=x.DOLLY;h.set(e.clientX,e.clientY)}else if(e.button===n.mouseButtons.PAN){if(n.noPan===true)return;T=x.PAN;u.set(e.clientX,e.clientY)}if(T!==x.NONE){document.addEventListener("mousemove",D,false);document.addEventListener("mouseup",P,false);n.dispatchEvent(L)}}function D(e){if(n.enabled===false)return;e.preventDefault();var t=n.domElement===document?n.domElement.body:n.domElement;if(T===x.ROTATE){if(n.noRotate===true)return;s.set(e.clientX,e.clientY);o.subVectors(s,i);n.rotateLeft(2*Math.PI*o.x/t.clientWidth*n.rotateSpeed);n.rotateUp(2*Math.PI*o.y/t.clientHeight*n.rotateSpeed);i.copy(s)}else if(T===x.DOLLY){if(n.noZoom===true)return;p.set(e.clientX,e.clientY);d.subVectors(p,h);if(d.y>0){n.dollyIn()}else{n.dollyOut()}h.copy(p)}else if(T===x.PAN){if(n.noPan===true)return;a.set(e.clientX,e.clientY);f.subVectors(a,u);n.pan(f.x,f.y);u.copy(a)}if(T!==x.NONE)n.update()}function P(){if(n.enabled===false)return;document.removeEventListener("mousemove",D,false);document.removeEventListener("mouseup",P,false);n.dispatchEvent(A);T=x.NONE}function H(e){if(n.enabled===false||n.noZoom===true||T!==x.NONE)return;e.preventDefault();e.stopPropagation();var t=0;if(e.wheelDelta!==undefined){t=e.wheelDelta}else if(e.detail!==undefined){t=-e.detail}if(t>0){n.dollyOut()}else{n.dollyIn()}n.update();n.dispatchEvent(L);n.dispatchEvent(A)}function B(e){if(n.enabled===false||n.noKeys===true||n.noPan===true)return;switch(e.keyCode){case n.keys.UP:n.pan(0,n.keyPanSpeed);n.update();break;case n.keys.BOTTOM:n.pan(0,-n.keyPanSpeed);n.update();break;case n.keys.LEFT:n.pan(n.keyPanSpeed,0);n.update();break;case n.keys.RIGHT:n.pan(-n.keyPanSpeed,0);n.update();break}}function j(e){if(n.enabled===false)return;switch(e.touches.length){case 1:if(n.noRotate===true)return;T=x.TOUCH_ROTATE;i.set(e.touches[0].pageX,e.touches[0].pageY);break;case 2:if(n.noZoom===true)return;T=x.TOUCH_DOLLY;var t=e.touches[0].pageX-e.touches[1].pageX;var r=e.touches[0].pageY-e.touches[1].pageY;var s=Math.sqrt(t*t+r*r);h.set(0,s);break;case 3:if(n.noPan===true)return;T=x.TOUCH_PAN;u.set(e.touches[0].pageX,e.touches[0].pageY);break;default:T=x.NONE}if(T!==x.NONE)n.dispatchEvent(L)}function F(e){if(n.enabled===false)return;e.preventDefault();e.stopPropagation();var t=n.domElement===document?n.domElement.body:n.domElement;switch(e.touches.length){case 1:if(n.noRotate===true)return;if(T!==x.TOUCH_ROTATE)return;s.set(e.touches[0].pageX,e.touches[0].pageY);o.subVectors(s,i);n.rotateLeft(2*Math.PI*o.x/t.clientWidth*n.rotateSpeed);n.rotateUp(2*Math.PI*o.y/t.clientHeight*n.rotateSpeed);i.copy(s);n.update();break;case 2:if(n.noZoom===true)return;if(T!==x.TOUCH_DOLLY)return;var r=e.touches[0].pageX-e.touches[1].pageX;var l=e.touches[0].pageY-e.touches[1].pageY;var c=Math.sqrt(r*r+l*l);p.set(0,c);d.subVectors(p,h);if(d.y>0){n.dollyOut()}else{n.dollyIn()}h.copy(p);n.update();break;case 3:if(n.noPan===true)return;if(T!==x.TOUCH_PAN)return;a.set(e.touches[0].pageX,e.touches[0].pageY);f.subVectors(a,u);n.pan(f.x,f.y);u.copy(a);n.update();break;default:T=x.NONE}}function I(){if(n.enabled===false)return;n.dispatchEvent(A);T=x.NONE}function q(e){e.preventDefault()}this.object=e;this.domElement=t!==undefined?t:document;this.enabled=true;this.target=new THREE.Vector3;this.center=this.target;this.noZoom=false;this.zoomSpeed=1;this.minDistance=0;this.maxDistance=Infinity;this.noRotate=false;this.rotateSpeed=1;this.noPan=false;this.keyPanSpeed=7;this.autoRotate=false;this.autoRotateSpeed=2;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.minAzimuthAngle=-Infinity;this.maxAzimuthAngle=Infinity;this.noKeys=false;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT};var n=this;var r=1e-6;var i=new THREE.Vector2;var s=new THREE.Vector2;var o=new THREE.Vector2;var u=new THREE.Vector2;var a=new THREE.Vector2;var f=new THREE.Vector2;var l=new THREE.Vector3;var c=new THREE.Vector3;var h=new THREE.Vector2;var p=new THREE.Vector2;var d=new THREE.Vector2;var v;var m;var g=0;var y=0;var b=1;var w=new THREE.Vector3;var E=new THREE.Vector3;var S=new THREE.Quaternion;var x={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5};var T=x.NONE;this.target0=this.target.clone();this.position0=this.object.position.clone();var N=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0));var C=N.clone().inverse();var k={type:"change"};var L={type:"start"};var A={type:"end"};this.rotateLeft=function(e){if(e===undefined){e=O()}y-=e};this.rotateUp=function(e){if(e===undefined){e=O()}g-=e};this.panLeft=function(e){var t=this.object.matrix.elements;l.set(t[0],t[1],t[2]);l.multiplyScalar(-e);w.add(l)};this.panUp=function(e){var t=this.object.matrix.elements;l.set(t[4],t[5],t[6]);l.multiplyScalar(e);w.add(l)};this.pan=function(e,t){var r=n.domElement===document?n.domElement.body:n.domElement;if(n.object.fov!==undefined){var i=n.object.position;var s=i.clone().sub(n.target);var o=s.length();o*=Math.tan(n.object.fov/2*Math.PI/180);n.panLeft(2*e*o/r.clientHeight);n.panUp(2*t*o/r.clientHeight)}else if(n.object.top!==undefined){n.panLeft(e*(n.object.right-n.object.left)/r.clientWidth);n.panUp(t*(n.object.top-n.object.bottom)/r.clientHeight)}else{console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")}};this.dollyIn=function(e){if(e===undefined){e=M()}b/=e};this.dollyOut=function(e){if(e===undefined){e=M()}b*=e};this.update=function(){var e=this.object.position;c.copy(e).sub(this.target);c.applyQuaternion(N);v=Math.atan2(c.x,c.z);m=Math.atan2(Math.sqrt(c.x*c.x+c.z*c.z),c.y);if(this.autoRotate&&T===x.NONE){this.rotateLeft(O())}v+=y;m+=g;v=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,v));m=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,m));m=Math.max(r,Math.min(Math.PI-r,m));var t=c.length()*b;t=Math.max(this.minDistance,Math.min(this.maxDistance,t));this.target.add(w);c.x=t*Math.sin(m)*Math.sin(v);c.y=t*Math.cos(m);c.z=t*Math.sin(m)*Math.cos(v);c.applyQuaternion(C);e.copy(this.target).add(c);this.object.lookAt(this.target);y=0;g=0;b=1;w.set(0,0,0);if(E.distanceToSquared(this.object.position)>r||8*(1-S.dot(this.object.quaternion))>r){this.dispatchEvent(k);E.copy(this.object.position);S.copy(this.object.quaternion)}};this.reset=function(){T=x.NONE;this.target.copy(this.target0);this.object.position.copy(this.position0);this.update()};this.getPolarAngle=function(){return m};this.getAzimuthalAngle=function(){return v};this.addEventListeners=function(){this.domElement.addEventListener("contextmenu",q,false);this.domElement.addEventListener("mousedown",_,false);this.domElement.addEventListener("mousewheel",H,false);this.domElement.addEventListener("DOMMouseScroll",H,false);this.domElement.addEventListener("touchstart",j,false);this.domElement.addEventListener("touchend",I,false);this.domElement.addEventListener("touchmove",F,false);window.addEventListener("keydown",B,false)};this.removeEventListeners=function(){this.domElement.removeEventListener("contextmenu",q,false);this.domElement.removeEventListener("mousedown",_,false);this.domElement.removeEventListener("mousewheel",H,false);this.domElement.removeEventListener("DOMMouseScroll",H,false);this.domElement.removeEventListener("touchstart",j,false);this.domElement.removeEventListener("touchend",I,false);this.domElement.removeEventListener("touchmove",F,false);window.removeEventListener("keydown",B,false)};this.addEventListeners();this.update()};THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);THREE.OrbitControls.prototype.constructor=THREE.OrbitControls
